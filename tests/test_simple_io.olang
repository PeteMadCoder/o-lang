// External C functions
fn printf(*byte str);

fn print_int(int value) {
    if (value == 0) {
        unsafe { printf("0"); }
        return;
    }

    var digits = new byte[12];
    var pos = 0;
    var temp = value;

    if (temp < 0) {
        temp = -temp;
    }

    while (temp > 0) {
        var digit = (temp % 10) + 48;
        digits[pos] = digit;
        temp = temp / 10;
        pos = pos + 1;
    }

    if (value < 0) {
        digits[pos] = 45; // '-'
        pos = pos + 1;
    }

    unsafe {
        var i = pos - 1;
        while (i >= 0) {
            var c = digits[i];
            printf(&c);
            i = i - 1;
        }
    }
}

fn main() -> int {
    print_int(42);
    return 0;
}