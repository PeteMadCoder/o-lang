import "std/memory.olang";

struct SimpleVector<T> {
    data: *T;
    count: int;

    new() {
        this.count = 0;
        unsafe {
            this.data = malloc(4 * 4) as *T;  // Small buffer
        }
    }

    fn add(val: T) {
        unsafe {
            *(this.data + this.count) = val;
        }
        this.count = this.count + 1;
    }

    fn get(idx: int) -> T {
        unsafe {
            return *(this.data + idx);
        }
    }
}

fn main() -> int {
    var vec = new SimpleVector<int>();
    vec.add(42);
    return vec.get(0);
}